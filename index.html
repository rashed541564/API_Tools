<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>সব-এক-সাথে অ্যাপ</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      background: #f1f1f1;
    }
    nav {
      background: #2c3e50;
      padding: 15px;
      display: flex;
      gap: 10px;
      justify-content: center;
    }
    nav button {
      background: #34495e;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
    }
    nav button:hover {
      background: #1abc9c;
    }
    section {
      display: none;
      padding: 20px;
    }
    section.active {
      display: block;
    }
  </style>
</head>
<body>

  <nav>
    <button onclick="showSection('countries')">দেশ</button>
    <button onclick="showSection('kanye')">Kanye কোট</button>
    <button onclick="showSection('meals')">রেসিপি</button>
  </nav>

  <!-- দেশ তথ্য -->
  <section id="countries" class="active">
    <h1>বিশ্বের দেশসমূহ</h1>
    <input type="text" id="countrySearch" placeholder="দেশের নাম লিখুন..." />
    <div class="country-container" id="countryContainer" style="display:grid;gap:20px;margin-top:20px;"></div>
  </section>

  <!-- Kanye কোট -->
  <section id="kanye">
    <h1>Kanye West এর কোট</h1>
    <div id="quoteBox" style="background:#222;color:#fff;padding:20px;border-radius:10px;max-width:600px;margin:20px auto;">লোড হচ্ছে...</div>
    <div style="text-align:center;">
      <button onclick="loadKanyeQuote()">নতুন কোট আনুন</button>
    </div>
  </section>

  <!-- রেসিপি সার্চ -->
  <section id="meals">
    <h1>Meal রেসিপি সার্চ করুন</h1>
    <input type="text" id="mealSearch" placeholder="যেমন: chicken, rice..." />
    <div class="meals" id="mealContainer" style="display:grid;gap:20px;margin-top:20px;"></div>
  </section>

  <script>
    // Section switcher
    function showSection(id) {
      document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    // Country Info
    let allCountries = [];
    fetch("https://restcountries.com/v3.1/all")
      .then(res => res.json())
      .then(data => {
        allCountries = data;
        displayCountries(allCountries);
      });

    function displayCountries(countries) {
      const container = document.getElementById("countryContainer");
      container.innerHTML = "";
      countries.forEach(country => {
        const div = document.createElement("div");
        div.style = "background:white;padding:10px;border-radius:8px;";
        div.innerHTML = `
          <img src="${country.flags.png}" style="width:100%;max-height:120px;object-fit:cover;border-radius:6px;">
          <h3>${country.name.common}</h3>
          <p><b>Capital:</b> ${country.capital?.[0] || "N/A"}</p>
          <p><b>Region:</b> ${country.region}</p>
          <p><b>Population:</b> ${country.population.toLocaleString()}</p>
        `;
        container.appendChild(div);
      });
    }

    document.getElementById("countrySearch").addEventListener("input", function () {
      const keyword = this.value.toLowerCase();
      const filtered = allCountries.filter(c =>
        c.name.common.toLowerCase().includes(keyword)
      );
      displayCountries(filtered);
    });

    // Kanye Quote
    function loadKanyeQuote() {
      fetch("https://api.kanye.rest/")
        .then(res => res.json())
        .then(data => {
          document.getElementById("quoteBox").innerText = `"${data.quote}"`;
        });
    }
    loadKanyeQuote();

    // Meal Search
    const mealSearch = document.getElementById("mealSearch");
    const mealContainer = document.getElementById("mealContainer");

    function fetchMeals(query = "fish") {
      mealContainer.innerHTML = "লোড হচ্ছে...";
      fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${query}`)
        .then(res => res.json())
        .then(data => {
          mealContainer.innerHTML = "";
          if (data.meals) {
            data.meals.forEach(meal => {
              const div = document.createElement("div");
              div.style = "background:white;padding:10px;border-radius:10px;";
              div.innerHTML = `
                <img src="${meal.strMealThumb}" style="width:100%;border-radius:10px;">
                <h3>${meal.strMeal}</h3>
                <p>${meal.strInstructions.slice(0, 100)}...</p>
                <a href="${meal.strYoutube}" target="_blank">ভিডিও দেখুন</a>
              `;
              mealContainer.appendChild(div);
            });
          } else {
            mealContainer.innerHTML = "কোনো খাবার পাওয়া যায়নি।";
          }
        });
    }

    mealSearch.addEventListener("input", () => {
      const q = mealSearch.value.trim();
      if (q.length >= 2) fetchMeals(q);
      else if (q.length === 0) fetchMeals("fish");
    });

    fetchMeals();
  </script>

</body>
</html>